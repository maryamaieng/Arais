<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>زفاف - النظام المتكامل</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <style>
        :root {
            --primary: #8B4513; --primary-light: #A0522D; --secondary: #D4AF37;
            --secondary-light: #E5C158; --accent: #8B0000; --light: #F9F3E9;
            --dark: #2C1810; --gray: #7A6A5C; --success: #2E8B57;
            --warning: #FFA500; --danger: #DC143C; --shadow: 0 4px 12px rgba(0,0,0,0.12);
            --radius: 12px;
        }
        *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Tahoma,Arial;}
        body{background:#f5f5f5;color:var(--dark);line-height:1.6}
        .login-container{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,var(--primary),var(--dark));padding:20px}
        .login-box{background:white;padding:32px;border-radius:var(--radius);box-shadow:var(--shadow);width:100%;max-width:420px;text-align:center}
        .login-title{color:var(--primary);font-size:1.8rem;margin-bottom:6px}
        .login-subtitle{color:var(--gray);margin-bottom:18px}
        .user-type-selector{display:flex;margin-bottom:16px;border-radius:10px;overflow:hidden;border:2px solid var(--primary)}
        .user-type{flex:1;padding:10px;background:white;border:none;cursor:pointer;font-weight:600;transition:all .2s}
        .user-type.active{background:var(--primary);color:#fff}
        .form-group{text-align:right;margin-bottom:12px}
        label{display:block;margin-bottom:6px;font-weight:600;color:var(--dark)}
        .form-control{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #ddd}
        .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 18px;background:var(--primary);color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:700;width:100%}
        .btn-secondary{background:var(--secondary);color:#111}
        .btn:hover{transform:translateY(-2px)}
        .dashboard{display:none;min-height:100vh}
        .sidebar{width:260px;background:linear-gradient(180deg,var(--primary),var(--dark));color:#fff;padding:18px 10px;position:fixed;height:100vh;overflow:auto}
        .logo{text-align:center;padding:10px 6px;border-bottom:1px solid rgba(255,255,255,0.08);margin-bottom:12px}
        .logo h1{color:var(--secondary);font-size:1.6rem;margin-bottom:4px}
        .menu{list-style:none;padding:8px}
        .menu-item{margin-bottom:8px}
        .menu-link{display:flex;align-items:center;padding:10px;border-radius:10px;color:#fff;text-decoration:none}
        .menu-link i{margin-left:10px}
        .menu-link:hover,.menu-link.active{background:rgba(255,255,255,0.06);color:var(--secondary-light)}
        .main-content{margin-right:260px;display:flex;flex-direction:column;min-height:100vh}
        .top-bar{background:#fff;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;box-shadow:var(--shadow)}
        .user-info{display:flex;align-items:center}
        .user-info img{width:44px;height:44px;border-radius:50%;margin-left:10px;border:2px solid var(--secondary)}
        .content{padding:22px}
        .dashboard-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px;margin-bottom:22px}
        .card{background:#fff;padding:16px;border-radius:12px;box-shadow:var(--shadow)}
        .card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
        .card-value{font-size:1.6rem;font-weight:800;color:var(--dark)}
        .section{background:#fff;border-radius:12px;padding:18px;box-shadow:var(--shadow);margin-bottom:18px}
        .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;border-bottom:1px solid #eee;padding-bottom:12px}
        .halls-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}
        .hall-card{background:#fff;border-radius:12px;overflow:hidden;box-shadow:var(--shadow)}
        .hall-image{height:180px;background-size:cover;background-position:center}
        .hall-content{padding:14px}
        .feature{background:var(--light);padding:6px 10px;border-radius:14px;font-size:.85rem;color:var(--gray);margin-right:6px}
        .service-card{background:#fff;border-radius:12px;padding:16px;text-align:center;box-shadow:var(--shadow);cursor:pointer}
        .service-card.selected{border:2px solid var(--secondary)}
        .booking-summary{background:var(--light);padding:16px;border-radius:12px}
        table{width:100%;border-collapse:collapse}
        th,td{padding:10px;text-align:right;border-bottom:1px solid #eee}
    </style>
</head>
<body>
    <div class="login-container" id="loginScreen">
        <div class="login-box">
            <h1 class="login-title">زفاف</h1>
            <p class="login-subtitle">النظام المتكامل لإدارة القاعات</p>
            <div class="user-type-selector">
                <button class="user-type active" data-type="admin">مدير</button>
                <button class="user-type" data-type="owner">صاحب القاعة</button>
                <button class="user-type" data-type="customer">عميل</button>
            </div>
            <div class="form-group">
                <label for="username">اسم المستخدم</label>
                <input type="text" id="username" class="form-control" placeholder="أدخل اسم المستخدم">
            </div>
            <div class="form-group">
                <label for="password">كلمة المرور</label>
                <input type="password" id="password" class="form-control" placeholder="أدخل كلمة المرور">
            </div>
            <button class="btn" id="loginBtn">تسجيل الدخول</button>
        </div>
    </div>

    <div class="dashboard" id="adminDashboard">لوحة المدير</div>
    <div class="dashboard" id="ownerDashboard">لوحة صاحب القاعة</div>
    <div class="dashboard" id="customerDashboard">لوحة العميل</div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const loginScreen = document.getElementById('loginScreen');
        const adminDashboard = document.getElementById('adminDashboard');
        const ownerDashboard = document.getElementById('ownerDashboard');
        const customerDashboard = document.getElementById('customerDashboard');
        const userTypes = document.querySelectorAll('.user-type');
        const loginBtn = document.getElementById('loginBtn');
        let selectedType = 'admin';
        userTypes.forEach(t => {
            t.addEventListener('click', function() {
                userTypes.forEach(x => x.classList.remove('active'));
                this.classList.add('active');
                selectedType = this.dataset.type;
            });
        });

        loginBtn.addEventListener('click', async function() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            const payload = {username, password, type: selectedType};

            try {
                const response = await fetch('https://jbph80gaih.execute-api.us-east-1.amazonaws.com/dev', {
                    method: 'POST',
                    headers: {'Content-Type':'application/json'},
                    body: JSON.stringify(payload)
                });
                const data = await response.json();

                if(data.message === 'success'){
                    loginScreen.style.display = 'none';
                    adminDashboard.style.display = data.dashboard==='admin'?'flex':'none';
                    ownerDashboard.style.display = data.dashboard==='owner'?'flex':'none';
                    customerDashboard.style.display = data.dashboard==='customer'?'block':'none';
                } else {
                    alert('بيانات غير صحيحة');
                }

            } catch(err) { console.error(err); alert('خطأ في الاتصال بالخادم'); }
        });
    });
    </script>
</body>
</html>
