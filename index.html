push(newBooking);
            
            // إغلاق النافذة
            document.getElementById('confirmBookingModal').style.display = 'none';
            
            // عرض رسالة نجاح
            alert(`تم تأكيد حجزك بنجاح!\nرقم الحجز: #${newBooking.id}\nسيتم التواصل معك قريباً لتأكيد التفاصيل.`);
            
            // إعادة تعيين الحجز
            selectedHall = null;
            selectedServices = [];
            bookingCart = { hall: null, services: [], total: 0 };
            document.querySelectorAll('.service-card.selected, .hall-card.selected').forEach(el => {
                el.classList.remove('selected');
            });
            document.getElementById('bookingSummary').style.display = 'none';
            
            // إعادة تعيين النموذج
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('customerEmail').value = '';
        }

        // دوال مساعدة
        function getCityName(cityCode) {
            const cities = {
                'baghdad': 'بغداد',
                'basra': 'البصرة',
                'erbil': 'أربيل',
                'najaf': 'النجف',
                'karbala': 'كربلاء'
            };
            return cities[cityCode] || cityCode;
        }

        function getGuestRange(range) {
            switch(range) {
                case '<100': return [1, 99];
                case '100-200': return [100, 200];
                case '200-300': return [200, 300];
                case '>300': return [301, Infinity];
                default: return [1, Infinity];
            }
        }

        function editHall(hallId) {
            const hall = appData.halls.find(h => h.id === hallId);
            if (hall) {
                document.getElementById('hallName').value = hall.name;
                document.getElementById('hallDescription').value = hall.description;
                document.getElementById('hallPrice').value = hall.price;
                document.getElementById('hallCapacity').value = hall.capacity;
                document.getElementById('hallCity').value = hall.city;
                document.getElementById('hallAddress').value = hall.address;
                document.getElementById('hallImage').value = hall.image;
                
                showAddHallModal();
            }
        }

        function deleteHall(hallId) {
            if (confirm('هل أنت متأكد من حذف هذه القاعة؟')) {
                appData.halls = appData.halls.filter(h => h.id !== hallId);
                loadOwnerData();
                alert('تم حذف القاعة بنجاح');
            }
        }
    </script>
</body>
</html>
